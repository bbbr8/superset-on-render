# Superset on Render — Starter (Superset 5.x)

Production-grade Apache Superset on Render with:
- **Render Postgres** (metadata DB)
- **Render Key Value** (Redis-compatible) for caching + Celery
- **Web** (Gunicorn) + **Celery worker** + **Celery beat** via Render Blueprint
- Optional sample data (`LOAD_EXAMPLES=true`)

## One‑click deploy (after you push this repo to GitHub)

Add this to your README after pushing to your GitHub (replace URL with your repo):

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/YOUR_USERNAME/superset-on-render-starter)

Render will read `render.yaml` and provision everything (web, workers, Redis, Postgres).  
See Render’s Blueprint spec for details. 

## What you get

- Superset **5.0** with `/health` endpoint for health checks
- Async SQL Lab + Alerts/Reports via **Celery**
- Redis-backed cache and results store
- Sensible defaults and idempotent init (`scripts/init.sh`)
- Custom `superset_config.py` wired through `SUPERSET_CONFIG_PATH`

## Configure

On first deploy, Render will prompt you for any secrets marked `sync: false` in `render.yaml`.
Update these in the Render dashboard any time:

| Variable | Purpose |
|---|---|
| `ADMIN_PASSWORD` | Admin login password (username defaults to `admin`) |
| `SUPERSET_SECRET_KEY` | Auto-generated by Render; rotate as needed |
| `LOAD_EXAMPLES` | Set `true` to load demo dashboards on first boot |

You can also set SMTP creds later to enable emailed reports (Celery beat already runs).

## Local development (optional)

You can build/run locally with Docker:

```bash
docker build -t superset-render .
docker run -p 8088:8088       -e ADMIN_PASSWORD=admin       -e DATABASE_URL=postgresql://...       -e REDIS_HOST=localhost -e REDIS_PORT=6379       superset-render
```

## Notes

- Database drivers are **not** bundled by Superset by default. This image includes `psycopg2-binary` (Postgres) and `shillelagh[gsheets]` for Google Sheets. Add more as needed to the Dockerfile.
- If you see async query failures, make sure the two Render workers are healthy and Redis is reachable on the private network.
- For GitHub PR previews (optional), enable preview environments in `render.yaml`.

## License

This repo scaffold is Apache-2.0. Superset itself is under the Apache License as well.
